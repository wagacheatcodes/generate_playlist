name: Debug X-Ray

on:
  workflow_dispatch:      # Allows you to click "Run" manually

jobs:
  debug_job:
    runs-on: ubuntu-latest

    steps:
    # 1. Standard Setup (Keep this!)
    - name: Checkout Public Data
      uses: actions/checkout@v3
      with:
        path: dist

    - name: Checkout Private Scripts
      uses: actions/checkout@v3
      with:
        repository: wagacheatcodes/Alpha
        token: ${{ secrets.API_TOKEN_GITHUB }}
        path: scripts_repo

    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'

    - name: Install & Setup
      run: |
        cp -r scripts_repo/scripts .
        cp scripts_repo/package.json .
        npm install

    # 2. THE DEBUG STEP (This replaces the big script runner)
    - name: Run X-Ray Debugger
      run: node scripts/debug_xray.js
